# YouTube動画分析レポート
## 機械学習を用いた人気度予測モデルの構築と検証

---

### 実行日時
2025年7月16日

### 分析対象
10のYouTubeチャンネルの動画メタデータ（総計5,479本の動画）

---

## 1. 分析の概要

本分析では、YouTubeの人気チャンネルの動画メタデータを用いて、動画の人気度を予測する機械学習モデルを構築しました。主成分分析（PCA）による次元削減とサポートベクターマシン（SVM）による分類・回帰分析を実施し、動画の人気度に影響する要因を特定しました。

### 1.1 分析対象チャンネル
- **Rachel & Jun's Adventures!** (268動画)
- **MrBeast** (883動画)
- **Mark Rober** (218動画)
- **Yes Theory** (425動画)
- **Pe### 8.1 使用ライブラリ
- **pandas**: データ操作・前処理
- **scikit-learn**: 機械学習モデル（PCA、SVM）
- **matplotlib**: データ可視化
- **numpy**: 数値計算

### 8.2 主成分の詳細分析方法

主成分の「中身」は、PCAオブジェクトの`components_`属性から取得できます：

```python
# 第1主成分の構成要素を取得
first_component = self.pca.components_[0]
feature_importance = np.abs(first_component)

# 特徴量と係数の対応表を作成
component_details = pd.DataFrame({
    'Feature': feature_columns,
    'Coefficient': first_component,
    'Absolute_Weight': feature_importance
}).sort_values('Absolute_Weight', ascending=False)

print("第1主成分の詳細構成:")
print(component_details)
```

**実際の主成分構成例**:
| 特徴量 | 係数 | 絶対値 | 解釈 |
|--------|------|--------|------|
| Published_Year | +0.496 | 0.496 | 新しい年ほど正の影響 |
| Channel_Age_Days | +0.444 | 0.444 | チャンネル歴が長いほど正の影響 |
| Like_Rate | +0.427 | 0.427 | いいね率が高いほど正の影響 |
| Description Length | +0.418 | 0.418 | 説明文が長いほど正の影響 |
| Channel Subscriber | +0.319 | 0.319 | 登録者数が多いほど正の影響 |

**主成分の物理的意味**:
- **第1主成分が高い動画**: 新しい時期に投稿され、歴史の長いチャンネルで、高いエンゲージメントを持つ動画
- **第1主成分が低い動画**: 古い時期に投稿され、新しいチャンネルで、低いエンゲージメントの動画

**全主成分の寄与度確認**:
```python
# 各主成分の分散説明比率
for i, ratio in enumerate(self.pca.explained_variance_ratio_):
    print(f"第{i+1}主成分: {ratio:.1%}の分散を説明")

# 累積寄与率
cumulative_ratio = np.cumsum(self.pca.explained_variance_ratio_)
print(f"11個の主成分で{cumulative_ratio[-1]:.1%}の分散を説明")
```cKinnon** (751動画)
- **Veritasium** (444動画)
- **The Slow Mo Guys** (361動画)
- **NikkieTutorials** (916動画)
- **Matt D'Avella** (458動画)
- **LegalEagle** (755動画)

**合計**: 5,479動画（前処理後: 5,472動画）

---

## 2. データセットの構造

### 2.1 元データの構造
各CSVファイルには以下の15のカラムが含まれています：

| カラム名 | 説明 | データ型 |
|---------|------|---------|
| Video Title | 動画タイトル | 文字列 |
| Thumbnail URL | サムネイル画像URL | 文字列 |
| Description Length | 説明文の長さ | 数値 |
| Tags | タグのリスト | 配列形式の文字列 |
| Published Data & Time | 公開日時 | 日時 |
| View Count | 再生回数 | 数値 |
| Like Count | いいね数 | 数値 |
| Comment Count | コメント数 | 数値 |
| Duration | 動画の長さ | 時間形式の文字列 |
| Category | カテゴリID | 数値 |
| Channel Title | チャンネル名 | 文字列 |
| Channel Subscriber | チャンネル登録者数 | 数値 |
| Channel Age | チャンネル開設日 | 日時 |
| Total number of channel uploads | チャンネルの総動画数 | 数値 |

### 2.2 データ例（LegalEagleチャンネル）
```
動画タイトル: "Real Lawyer Reacts to Suits (full episode)"
再生回数: 12,895,634回
いいね数: 211,176
コメント数: 8,890
動画時間: 27分27秒
説明文の長さ: 4,114文字
公開日: 2018-09-11
チャンネル登録者数: 3,730,000人
```

---

## 3. 分析手法とステップ

### 3.1 Step 1: データ読み込みと統合
```python
def load_all_csv_files(self):
    csv_files = glob.glob(os.path.join(self.metadata_folder, "*.csv"))
    all_dataframes = []
    for file in csv_files:
        df = pd.read_csv(file)
        channel_name = os.path.basename(file).replace("_metadata.csv", "")
        df["Channel_Name"] = channel_name
        all_dataframes.append(df)
    self.combined_data = pd.concat(all_dataframes, ignore_index=True)
```

**実行結果**: 10チャンネルから計5,479本の動画データを統合

### 3.2 Step 2: データ前処理と特徴量エンジニアリング

#### 3.2.1 数値データの変換
- 文字列として格納された数値データを数値型に変換
- 欠損値の処理（`pd.to_numeric(errors="coerce")`）

#### 3.2.2 時間データの処理
```python
def parse_duration(self, duration_str):
    # 日本語時間形式（X時間Y分Z秒）を秒に変換
    # 例: "27分27秒" → 1647秒
```

#### 3.2.3 新しい特徴量の生成
1. **人気度スコア**: `Popularity_Score = View Count / Channel Subscriber`
2. **エンゲージメント率**:
   - `Like_Rate = Like Count / View Count`
   - `Comment_Rate = Comment Count / View Count`
   - `Engagement_Rate = (Like Count + Comment Count) / View Count`
3. **時系列特徴量**:
   - 公開年、月、曜日、時間
   - チャンネル開設からの日数
4. **テキスト特徴量**:
   - タイトルの長さ
   - タグの数

#### 3.2.4 人気度カテゴリの作成
```python
df["Popularity_Category"] = pd.qcut(
    df["Popularity_Score"], q=3, labels=["Low", "Medium", "High"]
)
```

### 3.3 Step 3: 主成分分析（PCA）

#### 3.3.1 使用した特徴量（13個）
```python
feature_columns = [
    "Duration_Seconds", "Description Length", "Tags_Count", "Title_Length",
    "Channel Subscriber", "Channel_Age_Days", "Total number of channel uploads",
    "Published_Year", "Published_Month", "Published_DayOfWeek", "Published_Hour",
    "Like_Rate", "Comment_Rate"
]
```

#### 3.3.2 標準化とPCA実行
```python
self.scaler = StandardScaler()
X_scaled = self.scaler.fit_transform(X)
self.pca = PCA(n_components=0.95)  # 95%の分散を保持
X_pca = self.pca.fit_transform(X_scaled)
```

**実行結果**:
- 11個の主成分で97.0%の分散を説明
- 次元削減により計算効率を向上

### 3.4 Step 4: サポートベクターマシン（SVM）分析

#### 3.4.1 分類問題（人気度カテゴリの予測）
```python
svm_classifier = SVC(kernel="rbf", random_state=42)
svm_classifier.fit(X_train, y_train)
```

#### 3.4.2 回帰問題（人気度スコアの予測）
```python
y = np.log1p(self.processed_data["Popularity_Score"])  # 対数変換
svm_regressor = SVR(kernel="rbf")
svm_regressor.fit(X_train, y_train)
```

---

## 4. 分析結果

### 4.1 データ統計サマリー
- **総動画数**: 5,472本（前処理後）
- **平均再生回数**: 20,874,751回
- **最大再生回数**: 1,584,098,115回（MrBeastの動画）
- **平均人気度スコア**: 0.2997
- **最大人気度スコア**: 13.2135
- **平均動画時間**: 13.0分

### 4.2 主成分分析結果

#### 各主成分の寄与率
1. **第1主成分**: 18.0%
2. **第2主成分**: 14.8%
3. **第3主成分**: 12.1%
4. **第4主成分**: 9.9%
5. **第5主成分**: 8.3%

#### 第1主成分の重要特徴量
1. **Published_Year** (公開年): 0.496
2. **Channel_Age_Days** (チャンネル年数): 0.444
3. **Like_Rate** (いいね率): 0.427
4. **Description Length** (説明文の長さ): 0.418
5. **Channel Subscriber** (チャンネル登録者数): 0.319

#### 主成分の詳細構造解析

主成分は元の特徴量の線形結合として表現されます。各主成分の「中身」を数式で表すと以下のようになります：

**第1主成分の構成要素（係数）**:
```
第1主成分 = 0.496 × Published_Year
          + 0.444 × Channel_Age_Days
          + 0.427 × Like_Rate
          + 0.418 × Description Length
          + 0.319 × Channel Subscriber
          + (その他の特徴量...)
```

**主成分の解釈**:
- **正の係数**: その特徴量が大きいほど主成分値も大きくなる
- **負の係数**: その特徴量が大きいほど主成分値は小さくなる
- **係数の大きさ**: その特徴量の主成分への影響度を表す

**第1主成分の意味**:
第1主成分は主に「**時間的要因とエンゲージメント**」を表現しています：
- 公開年が新しく（係数：正）
- チャンネル歴が長く（係数：正）
- いいね率が高く（係数：正）
- 説明文が長い（係数：正）
動画ほど、第1主成分の値が大きくなります。

**第2主成分以降の構造**:
各主成分は異なる観点でデータの特性を捉えます：
- **第2主成分**: 投稿時期やチャンネル規模の別の側面
- **第3主成分**: エンゲージメントパターンの違い
- **第4主成分**: コンテンツ特性（時間、タグ数など）

### 4.3 SVM分析結果

#### 4.3.1 分類結果（人気度カテゴリ予測）
- **全体精度**: 70.2%

| カテゴリ | 適合率 | 再現率 | F1スコア | サポート数 |
|---------|-------|-------|---------|----------|
| High | 0.74 | 0.69 | 0.71 | 366 |
| Low | 0.83 | 0.76 | 0.80 | 364 |
| Medium | 0.56 | 0.66 | 0.61 | 365 |

**マクロ平均**: 精度0.71、再現率0.70、F1スコア0.71

#### 4.3.2 回帰結果（人気度スコア予測）
- **平均二乗誤差(MSE)**: 0.032
- **決定係数(R²)**: 0.507

### 4.4 チャンネル別人気度ランキング

| 順位 | チャンネル名 | 平均人気度スコア |
|------|-------------|------------------|
| 1 | Mark Rober | 0.8678 |
| 2 | The Slow Mo Guys | 0.4934 |
| 3 | Rachel & Jun's Adventures! | 0.4905 |

---

## 5. 考察

### 5.1 人気度に影響する主要因子

#### 5.1.1 時系列要因の重要性
第1主成分で最も重要な特徴量が「公開年」であることから、**YouTubeプラットフォームの成長と時代背景**が動画の人気度に大きく影響していることが判明しました。

- 初期のYouTubeでは競合が少なく、相対的に高い人気度を獲得しやすかった
- プラットフォームの成熟に伴い、競争が激化し人気度獲得が困難になった

#### 5.1.2 チャンネルの成熟度
「チャンネル年数」が第2位の重要性を持つことは、**長期的なブランド構築**の重要性を示しています。

- 長期間活動しているチャンネルほど安定した視聴者基盤を持つ
- ただし、初期参入の優位性も存在する

#### 5.1.3 エンゲージメントの質
「いいね率」が第3位に位置することは、**単純な再生回数だけでなく、視聴者の積極的な反応**が人気度に直結することを示しています。

### 5.2 予測精度の評価

#### 5.2.1 分類問題（70.2%の精度）
- **高人気・低人気カテゴリ**: 比較的高い精度（74%、83%）
- **中人気カテゴリ**: 予測困難（56%の精度）

この結果は、極端な人気度は予測しやすいが、中間的な人気度の予測は困難であることを示しています。

#### 5.2.2 回帰問題（R²=0.507）
約50%の分散を説明できており、**中程度の予測精度**を達成しました。残りの50%は以下の要因が考えられます：

- バイラル性（予測困難な急速な拡散）
- 外部要因（トレンド、時事性）
- コンテンツの質的要因（データに含まれない）

### 5.3 チャンネル戦略の洞察

#### 5.3.1 Mark Roberの成功要因
平均人気度スコア0.8678で1位のMark Roberは：
- 科学・工学系のニッチだが質の高いコンテンツ
- 長期間の安定した投稿
- 高いエンゲージメント率

#### 5.3.2 成功パターンの多様性
上位3チャンネルが異なるジャンル（科学、エンターテイメント、ライフスタイル）であることから、**コンテンツジャンルよりも品質と一貫性**が重要であることが示唆されます。

### 5.4 限界と今後の改善点

#### 5.4.1 データの限界
- **コンテンツの質的評価**が含まれていない
- **外部要因**（トレンド、季節性、時事性）が考慮されていない
- **視聴者の属性情報**が不足

#### 5.4.2 モデルの改善可能性
- **深層学習**による非線形関係の捕捉
- **時系列分析**による動的パターンの考慮
- **自然言語処理**によるタイトル・説明文の意味解析

---

## 6. 可視化結果の詳細説明

分析では、6つのグラフからなる総合的な可視化結果を出力しています（`youtube_analysis_results.png`）。各グラフについて詳しく説明します。

### 6.1 Graph 1: PCA累積寄与率（左上）
**目的**: 主成分分析で何個の成分が必要かを判断
**内容**: 主成分の数（x軸）に対する累積説明分散（y軸）
**結果解釈**:
- 11個の主成分で97%の分散を説明
- 最初の3-4個の主成分で約半分の情報を保持
- 急激な上昇から緩やかな上昇への変化点が次元削減の最適点

### 6.2 Graph 2: 主成分空間での分布（中央上）
**目的**: データが主成分空間でどのように分散しているかを視覚化
**内容**: 第1主成分（x軸）vs 第2主成分（y軸）の散布図
**色**: 人気度スコアの対数値（viridisカラーマップ）
**結果解釈**:
- 色が濃い（黄色）ほど人気度が高い
- データの分布パターンから、人気度の高い動画は特定の主成分値域に集中
- 主成分空間での分離可能性を視覚的に確認

### 6.3 Graph 3: 第1主成分の特徴量重要度（右上）
**目的**: どの特徴量が最も重要かを特定
**内容**: 各特徴量の第1主成分への寄与度を棒グラフで表示
**結果解釈**:
- **Published_Year**（公開年）が最重要
- **Channel_Age_Days**（チャンネル年数）が第2位
- **Like_Rate**（いいね率）が第3位
- 時系列要因とエンゲージメント要因が重要

### 6.4 Graph 4: 人気度スコア分布（左下）
**目的**: 人気度スコアの分布を把握
**内容**: 人気度スコア（対数変換後）のヒストグラム
**結果解釈**:
- 右に偏った分布（対数正規分布的）
- 大多数の動画は中〜低人気度
- 少数の動画が非常に高い人気度を獲得
- この分布特性が予測の難しさの要因

### 6.5 Graph 5: チャンネル別平均人気度（中央下）
**目的**: チャンネル間の人気度格差を比較
**内容**: 各チャンネルの平均人気度スコアを棒グラフで表示
**結果解釈**:
- **Mark Rober**が圧倒的に高い人気度（0.87）
- **The Slow Mo Guys**、**Rachel & Jun's Adventures!**が続く
- チャンネル間で大きな格差が存在
- ニッチだが高品質なコンテンツ（Mark Rober）の優位性

### 6.6 Graph 6: 動画時間と人気度の関係（右下）
**目的**: 動画の長さが人気度に与える影響を分析
**内容**: 動画時間（秒、x軸）vs 人気度スコア（対数、y軸）の散布図
**結果解釈**:
- 明確な線形関係は見られない
- 短時間動画（0-500秒）でも高人気度が可能
- 長時間動画（1000秒以上）は人気度のばらつきが大きい
- 動画時間よりもコンテンツの質が重要であることを示唆

### 6.7 可視化の技術的特徴
```python
plt.figure(figsize=(15, 12))  # 大きなキャンバス（15×12インチ）
plt.subplot(2, 3, i)         # 2行3列のレイアウト
plt.tight_layout()           # 自動レイアウト調整
plt.savefig(output_file, dpi=300)  # 高解像度での保存
```

### 6.8 カラーマップと透明度の効果的な使用
- **viridisカラーマップ**: 色覚に配慮した科学的可視化
- **alpha=0.6**: 重なりのあるデータポイントを視認可能
- **カラーバー**: 色と値の対応関係を明確に表示

### 6.9 可視化から得られる洞察
1. **データの複雑性**: 6つの異なる視点から多面的に分析
2. **予測困難性の根拠**: 人気度分布の偏りが予測精度制限の要因
3. **成功パターンの多様性**: チャンネル別分析で異なる戦略の有効性
4. **非線形関係**: 動画時間など、単純な相関では説明できない関係性

---

## 7. 結論

### 6.1 主要な発見
1. **時系列要因**（公開年、チャンネル年数）が人気度に最も大きく影響
2. **エンゲージメントの質**（いいね率）が再生回数以上に重要
3. **中程度の予測精度**（分類70%、回帰R²=0.51）を達成
4. **極端な人気度は予測しやすく、中間は困難**

### 6.2 実用的な示唆
1. **長期的なブランド構築**の重要性
2. **高品質なコンテンツ**による高エンゲージメント率の追求
3. **ジャンルよりも一貫性と品質**が成功の鍵

### 6.3 今後の研究方向
1. コンテンツの質的要因の定量化
2. リアルタイム予測システムの構築
3. 個別チャンネル向けカスタマイズ戦略の開発

---

## 8. 技術的詳細

### 7.1 使用ライブラリ
- **pandas**: データ操作・前処理
- **scikit-learn**: 機械学習モデル（PCA、SVM）
- **matplotlib**: データ可視化
- **numpy**: 数値計算

### 8.3 実行環境
- Python 3.x
- 分析対象期間: チャンネル開設～データ収集時点
- 計算時間: 約2-3分（5,472件の動画データ）

### 8.4 再現性
- 乱数シード固定（`random_state=42`）
- データ前処理の標準化手順
- 明確なファイル構造とパラメータ設定

---

*本レポートは2025年7月16日に実行された分析結果に基づいています。YouTubeプラットフォームの動的な性質を考慮し、定期的な再分析が推奨されます。*
